---
import About from "./icons/About.astro";
import Contact from "./icons/Contact.astro";
import Home from "./icons/Home.astro";
import Projects from "./icons/Projects.astro";
import Skills from "./icons/Skills.astro";
import NavLink from "./NavLink.astro";
---

<script>
    const main = document.querySelector("main");
    const thumb = document.getElementById("scroll-thumb");
    const link2 = document.getElementById("link2");
    const link3 = document.getElementById("link3");
    const link4 = document.getElementById("link4");
    const link5 = document.getElementById("link5");

    main?.addEventListener("scroll", () => {
        const scrollTop = main.scrollTop + window.innerHeight;
        const scrollHeight = main.scrollHeight;
        const scrollPercent = scrollTop / scrollHeight;

        if (!thumb) return;

        thumb.style.scale = `1 ${scrollPercent}`;

        if (scrollPercent >= 0.36) {
            link2?.classList.add("light");
        } else link2?.classList.remove("light");

        if (scrollPercent >= 0.56) {
            link3?.classList.add("light");
        } else link3?.classList.remove("light");

        if (scrollPercent >= 0.76) {
            link4?.classList.add("light");
        } else link4?.classList.remove("light");

        if (scrollPercent >= 0.96) {
            link5?.classList.add("light");
        } else link5?.classList.remove("light");
    });
</script>

<nav class="flex items-center">
    <ul id="link-list" class="link-list relative text-lg">
        <span id="scroll-thumb"></span>
        <li class="">
            <NavLink url="#home" className="light"
                ><span class="nav-link-icon"><Home /></span>
                <span class="nav-link-text">Inicio</span>
            </NavLink>
        </li>
        <li class="">
            <NavLink url="#projects" className="" id="link2"
                ><span class="nav-link-icon"><Projects /></span>
                <span class="nav-link-text">Proyectos</span>
            </NavLink>
        </li>
        <li>
            <NavLink url="#about" className="" id="link3"
                ><span class="nav-link-icon"><About /></span>
                <span class="nav-link-text">Sobre m√≠</span>
            </NavLink>
        </li>
        <li>
            <NavLink url="#skills" className="" id="link4"
                ><span class="nav-link-icon"><Skills /></span>
                <span class="nav-link-text">Skills</span></NavLink
            >
        </li>
        <li>
            <NavLink url="#contact" className="" id="link5"
                ><span class="nav-link-icon"><Contact /></span>
                <span class="nav-link-text">Contacto</span>
            </NavLink>
        </li>
    </ul>
</nav>
